//@version=6
library("pjdhiro_core_v6")          // ← これは“ライブラリ宣言”。indicator() ではない点に注意

// =====================
// 通貨・pipsユーティリティ（計算のみ。描画は持たない）
// =====================

// export した関数だけが「import 先」から見える。
// => は“式本体”の書き方。最後の行が戻り値になる（return は書かない）。

// pipサイズ（JPYは0.01, それ以外は0.0001）
// syminfo.currency はチャートの通貨。バーごとに変わらないので simple 扱いだが、型は float としてOK
export pip() =>
    float p = syminfo.currency == "JPY" ? 0.01 : 0.0001
    p                                       // ← 明示的に変数を返すと読みやすい

// pips → 価格
export pips_to_price(float pips) =>
    float v = pips * pip()
    v

// 価格差 → pips
export price_to_pips(float priceDelta) =>
    float v = priceDelta / pip()
    v
